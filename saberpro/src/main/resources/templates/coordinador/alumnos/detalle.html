<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalle Alumno - Sistema Saber Pro</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a th:href="@{/coordinador/dashboard}" class="navbar-brand">üéì Sistema Saber Pro UTS</a>
            <ul class="navbar-menu">
                <li><a th:href="@{/coordinador/dashboard}">Dashboard</a></li>
                <li><a th:href="@{/coordinador/alumnos}">Alumnos</a></li>
            </ul>
            <div class="navbar-user">
                <span>üë§ <span th:text="${usuarioNombre}">Usuario</span></span>
                <a th:href="@{/logout}" class="btn-logout">Cerrar Sesi√≥n</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <h1 class="mt-4 mb-4" style="color: #0B4A75;">üë§ Detalle del Alumno</h1>

        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

        <!-- Informaci√≥n b√°sica -->
        <div class="card">
            <div class="card-header">üìã Informaci√≥n Personal</div>
            <div class="d-flex gap-3" style="flex-wrap: wrap;">
                <div style="flex: 1; min-width: 250px;">
                    <p><strong>Documento:</strong> <span th:text="${alumno.numeroDocumento}">123456</span></p>
                    <p><strong>Nombre:</strong> <span th:text="${alumno.nombreCompleto}">Nombre</span></p>
                    <p><strong>Registro ICFES:</strong> <span th:text="${alumno.numeroRegistro}">EK123456</span></p>
                </div>
                <div style="flex: 1; min-width: 250px;">
                    <p><strong>Correo:</strong> <span th:text="${alumno.correoElectronico ?: 'No registrado'}">correo@ejemplo.com</span></p>
                    <p><strong>Tel√©fono:</strong> <span th:text="${alumno.numeroTelefonico ?: 'No registrado'}">3001234567</span></p>
                </div>
            </div>
            <div class="mt-3">
                <a th:href="@{/coordinador/alumnos/editar/{id}(id=${alumno.id})}" class="btn btn-warning">‚úèÔ∏è Editar Alumno</a>
                <a th:href="@{/coordinador/alumnos/{id}/resultado(id=${alumno.id})}" class="btn btn-primary">üìä Gestionar Resultado</a>
            </div>
        </div>

        <!-- Resultado Saber Pro -->
        <div class="card" th:if="${resultado != null}">
            <div class="card-header">üìä Resultado Saber Pro</div>
            
            <!-- Estado del examen -->
            <div class="text-center mb-3">
                <div style="font-size: 3rem; font-weight: bold;" 
                     th:if="${resultado.puntajeSaberPro != null}"
                     th:styleappend="${resultado.estadoExamen.name() == 'APROBADO' ? 'color: #28A745;' : 'color: #DC3545;'}"
                     th:text="${resultado.puntajeSaberPro}">200</div>
                <span class="badge" 
                      th:classappend="${resultado.estadoExamen.name() == 'APROBADO' ? 'badge-success' : (resultado.estadoExamen.name() == 'REPROBADO' ? 'badge-danger' : 'badge-warning')}"
                      th:text="${resultado.estadoExamen}">Estado</span>
            </div>

            <!-- Detalle por competencia -->
            <table class="table" th:if="${resultado.estadoExamen.name() != 'ANULADO'}">
                <thead>
                    <tr>
                        <th>Competencia</th>
                        <th>Puntaje</th>
                        <th>Nivel</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Comunicaci√≥n Escrita</td>
                        <td th:text="${resultado.puntajeComunicacionEscrita}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelComunicacionEscrita}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Razonamiento Cuantitativo</td>
                        <td th:text="${resultado.puntajeRazonamientoCuantitativo}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelRazonamientoCuantitativo}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Lectura Cr√≠tica</td>
                        <td th:text="${resultado.puntajeLecturaCritica}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelLecturaCritica}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Competencias Ciudadanas</td>
                        <td th:text="${resultado.puntajeCompetenciasCiudadanas}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelCompetenciasCiudadanas}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Ingl√©s</td>
                        <td th:text="${resultado.puntajeIngles}">0</td>
                        <td>
                            <span class="badge badge-info" th:text="${resultado.nivelIngles}">Nivel</span>
                            <span class="badge badge-success" th:text="${resultado.nivelInglesCEFR}">CEFR</span>
                        </td>
                    </tr>
                    <tr>
                        <td>Formulaci√≥n de Proyectos</td>
                        <td th:text="${resultado.puntajeFormulacionProyectos}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelFormulacionProyectos}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Pensamiento Cient√≠fico</td>
                        <td th:text="${resultado.puntajePensamientoCientifico}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelPensamientoCientifico}">Nivel</span></td>
                    </tr>
                    <tr>
                        <td>Dise√±o de Software</td>
                        <td th:text="${resultado.puntajeDisenoSoftware}">0</td>
                        <td><span class="badge badge-info" th:text="${resultado.nivelDisenoSoftware}">Nivel</span></td>
                    </tr>
                </tbody>
            </table>

            <!-- Beneficios -->
            <div th:if="${resultado.exoneradoTrabajoGrado}" class="alert alert-success mt-3">
                <strong>üéÅ Beneficio:</strong> <span th:text="${resultado.descripcionBeneficio}">Descripci√≥n</span>
            </div>
            <div th:unless="${resultado.exoneradoTrabajoGrado}" class="alert alert-warning mt-3" th:if="${resultado.estadoExamen.name() != 'ANULADO'}">
                <strong>‚ÑπÔ∏è Estado:</strong> <span th:text="${resultado.descripcionBeneficio}">Descripci√≥n</span>
            </div>
        </div>

        <div class="card" th:unless="${resultado != null}">
            <div class="alert alert-info">
                <p>Este alumno a√∫n no tiene resultados registrados.</p>
                <a th:href="@{/coordinador/alumnos/{id}/resultado(id=${alumno.id})}" class="btn btn-primary">‚ûï Agregar Resultado</a>
            </div>
        </div>

        <div class="mt-3">
            <a th:href="@{/coordinador/alumnos}" class="btn btn-secondary">‚Üê Volver a la Lista</a>
        </div>
    </main>
</body>
</html>